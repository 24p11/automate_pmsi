##################
Command line tools
##################

This package will also install a few command line utilities that can be ran directly from the terminal (rather than Python). For example::

    $ grep_keras_progress notebook.ipynb

will parse the results from the progress bar generated by ``tf.keras`` and print them on the terminal in the CSV format (which can be copy-pasted into Google sheets).

.. click:: tf_codage.cli.train_model:main
   :prog: train_model

.. note:: 
   NOTEBOOK must have one cell with the ``parameters`` tag. You can add the tag in the cell properties side bar as described `here <https://papermill.readthedocs.io/en/latest/usage-parameterize.html#jupyterlab-2-0>`_. There are several parameter names that are defined by default by the ``train_model`` tool and that you should use in your code:
   
   * ``VERBOSITY``: verbosity level according to keras definition (1 for verbose, 2 for more silent)
   * ``N_EPOCHS``: number of training epochs (set by ``-n`` parameter)
   * ``OUTPUT_DIR``: directory where the model outputs are written
   * ``LEARNING_RATE``: learning rate (set by ``-l`` parameter)

   See also a sample `notebook <https://github.com/24p11/automate_pmsi/blob/master/docs/notebooks/sample_model_notebook.ipynb>`_ on GitHub. Use it as a template for your own projects.

.. autoprogram:: tf_codage.cli.grep_keras_progress:parser
   :prog: grep_keras_progress

.. autoprogram:: tf_codage.cli.download_csv:parser
   :prog: download_hdfs_csv
